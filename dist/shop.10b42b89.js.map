{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,0BDIA,MAAME,EAAiBC,SAASC,eAAe,YACzCC,EAAOF,SAASC,eAAe,QAC/BE,EAASH,SAASC,eAAe,UAEvCG,eAAeC,OAAO,YAAa,CAC/BC,MAAO,IACPC,SAAU,KACVC,OAAQ,SACRC,SAAU,UAGdL,eAAeC,OAAO,iBAAkB,CACpCC,MAAO,IACPC,SAAU,IACVC,OAAQ,MACRC,SAAU,WAId,IAAIC,EAAW,GA+Bf,SAASC,EAAeC,GACpB,MAAMC,EAAUb,SAASc,cAAc,KACvCD,EAAQE,UAAY,UACpBF,EAAQG,aAAa,OAAQ,2BAA2BJ,EAAKK,MAG7D,MAAMC,EAAaN,EAAKO,OAASP,EAAKO,OAAO,GAAK,0PAGlDN,EAAQO,UAAY,6DAWvBF,gIAKuBN,EAAAS,mDACKC,EAAAC,eAAAX,EAAAY,mCAKzBzB,EACI0B,YAAiBZ,kBAIlBa,IAEsB,MAAEC,EAAAzB,EAAA0B,MAGxBC,EAAc1B,EACIyB,MAAgFE,QAAEC,IAAAF,GAGvG,IAAGG,EAAc,GAIA,QAAdL,IAAcK,EACbtB,EAAiBuB,MAAA,CAAAC,EAASC,IAAKA,EAAEX,MAAUU,EAAAV,SAG9B,QAAdG,IAAcK,EACbtB,EAAiBuB,MAAA,CAAAC,EAASC,IAAKD,EAAEV,MAAUW,EAAAX,SAG/C,YAAAG,IAAAK,EAA+BtB,EAAAuB,MAAA,CAAAC,EAAAC,IAAAD,EAAAb,KAAAe,cAAAC,cAAAF,EAAAd,KAAAe,kBAEiD,YAAAT,IAAAK,EAAAtB,EAAAuB,MAAA,CAAAC,EAAAC,IAAAA,EAAAd,KAAAe,cAAAC,cAAAH,EAAAb,KAAAe,kBAIC,gBAAAT,IAAAK,EAAAtB,EAAAuB,MAAA,CAAAC,EAAAC,IAAAA,EAAAG,SAAAJ,EAAAI,YAKlE,gBAAfX,IAA8BK,EAAItB,EAAAuB,MAAA,CAAAC,EAAAC,IAAAD,EAAAI,SAAAH,EAAAG,YAGtB,MAAZT,GAA4B,MAADA,GAAC,MAAAA,IAAAG,EAAAtB,EAAA6B,QAAA1B,GAAAA,EAAA2B,OAAAX,KAG/B,UAAAA,GAAA,UAAAA,GAAA,SAAAA,IAAAG,EAAAtB,EAAA6B,QAAA1B,GAAAA,EAAA4B,QAAAZ,KAIG9B,EAAeqB,UAAC,GACjBY,EAAAU,SAAA7B,IAEHF,EAAuBE,MAErBiB,QAAAC,IAAAC,GAEFF,QAAAC,IAAAJ,mFA5GAgB,iBAEI,MAAMC,EARV,WACI,MAAMC,EAAMC,OAAOC,SAASC,OAE5B,OADqB,IAAIC,gBAAgBJ,GACrBK,IAAI,YAKPC,GAGXC,QClCVT,eAA2BU,GACvB,MAAMC,EAAgBxD,EAAAyD,WAAWF,EAAI,YACrC,IACI,MALRG,KAKgBA,SAAgB1D,EAAA2D,QAAQH,GAQhC,OAPiBE,EAAKE,KAAKC,IAChB,IACAA,EAAIC,OACP3C,GAAI0C,EAAI1C,OAKlB,MAAM4C,GACJ/B,QAAQC,IAAI8B,IDqBeC,CAAYlE,EAAAyD,IAC3C,IAAIU,EAAmB,GAGnBA,EADY,QAAZnB,GAAkC,OAAbA,EACFQ,EAGAA,EAAiBb,QAAQ1B,GAAYA,EAAQ+B,WAAaA,IAGjFmB,EAAiBrB,SAAQ7B,IACrBF,EAAeE,MAEnBH,EAAWqD","sources":["logic/shop.js","logic/products.js"],"sourcesContent":["import { db } from \"./importFirebase\";\r\nimport { getProducts } from \"./products\";\r\nimport { currencyFormat } from \"./utils/index\";\r\n\r\nconst productSection = document.getElementById(\"products\");\r\nconst sort = document.getElementById(\"sort\");\r\nconst filter = document.getElementById(\"filter\");\r\n\r\nScrollReveal().reveal('.products', { \r\n    delay: 1000,\r\n    duration: 1500,\r\n    origin: 'bottom',\r\n    distance: '-50px',\r\n});\r\n\r\nScrollReveal().reveal('.contact__text', {\r\n    delay: 5000, \r\n    duration: 2000,\r\n    origin: 'top',\r\n    distance: '-150px',\r\n});\r\n\r\n//aplicarle filtros a este arreglo porque ya todos estan aca\r\nlet products = [];\r\n\r\nfunction getCategory(){\r\n    const url = window.location.search;\r\n    const searchParams = new URLSearchParams(url);\r\n    return searchParams.get(\"category\");\r\n}\r\n\r\nasync function loadProducts(){\r\n\r\n    const category = getCategory();\r\n    \r\n\r\n    const firebaseProducts = await getProducts(db);\r\n    let filteredProducts = [];\r\n\r\n    if (category=== \"All\" || category === null) {\r\n        filteredProducts = firebaseProducts;\r\n\r\n    }else {\r\n        filteredProducts = firebaseProducts.filter((product) => product.category === category);\r\n    }\r\n\r\n    filteredProducts.forEach(product => {\r\n        renderProducts(product);\r\n    });\r\n    products = filteredProducts;\r\n}\r\n\r\n\r\n\r\nfunction renderProducts(item){\r\n    const product = document.createElement(\"a\");\r\n    product.className = \"product\";\r\n    product.setAttribute(\"href\", `./productDetail.html?id=${item.id}`);\r\n\r\n\r\n    const coverImage = item.images ? item.images[0] : \"https://www.google.com/url?sa=i&url=https%3A%2F%2Fes.101-help.com%2Fc0f5234e26-icono-broken-image-en-google-chrome-browser%2F&psig=AOvVaw2pfrdI-2iiP9GY3ImEUq_N&ust=1651205257679000&source=images&cd=vfe&ved=0CAwQjRxqFwoTCKiqzInxtfcCFQAAAAAdAAAAABAN\";\r\n\r\n\r\n    product.innerHTML = `\r\n        <div class = \"imgAnimation\">\r\n        <img src=\"${coverImage}\" alt=\"\" class=\"product__image\">\r\n        </div>\r\n        <div class=\"product__info\">\r\n            <p class=\"product__name\">${item.name}</p>\r\n            <p class=\"product__price\">${currencyFormat(item.price)}</p>\r\n        </div>\r\n    `;\r\n\r\n    productSection.appendChild(product);\r\n}\r\n\r\n\r\nasync function filtersAction(){\r\n    const sortValue = sort.value;\r\n    const filterValue = filter.value;\r\n    console.log(filterValue);\r\n\r\n    let sortedProducts = [];\r\n \r\n    //--------Sort by----------\r\n    if(sortValue === \"asc\"){\r\n        sortedProducts = products.sort((a, b) => \r\n            b.price - a.price);\r\n    }\r\n\r\n    if(sortValue === \"dsc\"){\r\n        sortedProducts = products.sort((a, b) => \r\n            a.price - b.price);\r\n    }\r\n\r\n    if(sortValue === \"nameAsc\") {\r\n        sortedProducts = products.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()));\r\n    }\r\n\r\n    if(sortValue === \"nameDsc\") {\r\n        sortedProducts = products.sort((a, b) => b.name.toLowerCase().localeCompare(a.name.toLowerCase()));\r\n    }\r\n\r\n    if(sortValue === \"quantityAsc\") {\r\n        sortedProducts = products.sort((a, b) => b.quantity - a.quantity)\r\n    }\r\n\r\n    if(sortValue === \"quantityDsc\") {\r\n        sortedProducts = products.sort((a, b) => a.quantity - b.quantity)\r\n    }\r\n    \r\n    //---------Filter by-----------\r\n    if(filterValue === \"S\" || filterValue === \"M\" || filterValue === \"L\") {\r\n        sortedProducts = products.filter((product) => product.size === filterValue);\r\n    }\r\n\r\n    if(filterValue === \"black\" || filterValue === \"white\" || filterValue === \"gray\") {\r\n        sortedProducts = products.filter((product) => product.color === filterValue);\r\n    }\r\n\r\n\r\n    productSection.innerHTML = \"\";\r\n    sortedProducts.forEach(product => {\r\n        renderProducts(product);\r\n    });\r\n    console.log(sortedProducts);\r\n    console.log(sortValue);\r\n\r\n}\r\n\r\n\r\nsort.addEventListener(\"change\", e => {\r\n    filtersAction();\r\n});\r\n\r\nfilter.addEventListener(\"change\", e => {\r\n    filtersAction();\r\n})\r\n\r\nloadProducts();\r\n\r\n","import { collection, getDocs } from \"firebase/firestore\";\r\n\r\nasync function getProducts(db) {\r\n    const collectionRef = collection(db, \"products\");\r\n    try {\r\n        const { docs } =  await getDocs(collectionRef);\r\n        const products = docs.map((doc) => {\r\n            return {\r\n                ...doc.data(),\r\n                id: doc.id,\r\n            };\r\n            \r\n        });\r\n        return products;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport {\r\n    getProducts,\r\n}"],"names":["$ijjug","parcelRequire","$etBjH","$175f616e01643183$var$productSection","document","getElementById","$175f616e01643183$var$sort","$175f616e01643183$var$filter","ScrollReveal","reveal","delay","duration","origin","distance","$175f616e01643183$var$products","$175f616e01643183$var$renderProducts","item","product","createElement","className","setAttribute","id","coverImage","images","innerHTML","name","$jVR3t","currencyFormat","price","appendChild","$175f616e01643183$var$filtersAction","sortValue","value","filterValue","console","log","sortedProducts","sort","a","b","toLowerCase","localeCompare","quantity","filter","size","color","forEach","async","category","url","window","location","search","URLSearchParams","get","$175f616e01643183$var$getCategory","firebaseProducts","db","collectionRef","collection","docs","getDocs","map","doc","data","e","$5480a69015b35512$export$68a801b7b3c0bfaa","filteredProducts"],"version":3,"file":"shop.10b42b89.js.map"}